\c electronicbulling fhalcom;

-- SECUENCIA PARA LOS ESTADOS
CREATE SEQUENCE IF NOT EXISTS electronicdocument.EDSSTATUS MINVALUE  1 START 1 INCREMENT 1;


-- TABLA QUE DEFINE LOS ESTADOS DE LOS DOCUMENTOS
CREATE TABLE IF NOT EXISTS electronicdocument.EDTSTATUS(
    ID NUMERIC(10) PRIMARY KEY DEFAULT NEXTVAL('electronicdocument.EDSSTATUS'),
    CODE VARCHAR(5) UNIQUE NOT NULL ,
    DESCRIPCION VARCHAR(100)  NOT NULL
);

-- DATOS DE INICIALES DE ESTADO
INSERT INTO electronicdocument.EDTSTATUS (ID, CODE,DESCRIPCION) VALUES (nextval('electronicdocument.EDSSTATUS'), 'ACT','ESTADO ACTIVO DEL DOCUMENTO');
INSERT INTO electronicdocument.EDTSTATUS (ID, CODE,DESCRIPCION) VALUES (nextval('electronicdocument.EDSSTATUS'),'INT','ESTADO INACTIVO DEL DOCUMENTO');
INSERT INTO electronicdocument.EDTSTATUS (ID, CODE,DESCRIPCION) VALUES (nextval('electronicdocument.EDSSTATUS'),'TMP','ESTADO TEMPORAL DEL DOCUMENTO');
INSERT INTO electronicdocument.EDTSTATUS (ID, CODE,DESCRIPCION) VALUES (nextval('electronicdocument.EDSSTATUS'),'SUS','ESTADO SUSPENDIDO DEL DOCUMENTO');

-- SECUENCIA PARA AMBIENTES
CREATE SEQUENCE IF NOT EXISTS electronicdocument.EDSENVIRONMENTKIND MINVALUE 1 INCREMENT 1 START 1;

-- TABLA PARA GUARDAR LOS AMBIENTES DE ENVIO DE DOCUMENTOS
CREATE TABLE IF NOT EXISTS electronicdocument.EDTENVIRONMENTKIND
(
    ID          NUMERIC(10) PRIMARY KEY DEFAULT NEXTVAL('electronicdocument.EDSENVIRONMENTKIND'),
    CODE        VARCHAR(2) UNIQUE NOT NULL,
    DESCRIPTION VARCHAR(100),
    DETAIL      VARCHAR(200),
    STATUS_ID   NUMERIC(10),
    STATUSCODE  VARCHAR(5),
    CONSTRAINT FK_KINDENVIRONMENT_STATUSID FOREIGN KEY(STATUS_ID) REFERENCES electronicdocument.EDtstatus(ID) ON DELETE NO ACTION ON UPDATE CASCADE,
    CONSTRAINT FK_KINDENVIRONMENT_STATUSCODE FOREIGN KEY (STATUSCODE) REFERENCES electronicdocument.EDtstatus(CODE) ON DELETE NO ACTION ON UPDATE CASCADE
);

-- DATOS DE INICIALES DE AMBIENTES
INSERT INTO electronicdocument.EDTENVIRONMENTKIND(CODE, DESCRIPTION, DETAIL, STATUS_ID, STATUSCODE) VALUES ('1','PRUEBAS', 'AMBIENTE DE PRUEBAS', 1,'ACT');
INSERT INTO electronicdocument.EDTENVIRONMENTKIND(CODE, DESCRIPTION, DETAIL, STATUS_ID, STATUSCODE) VALUES ('2','PRODUCCÌON', 'AMBIENTE DE PRODUCCÌON', 1,'ACT');

-- CREANDO SECUENCIA PARA TIPOS DE DOCUMENTOS
CREATE SEQUENCE IF NOT EXISTS  electronicdocument.EDSDOCUMENTKIND START 1 INCREMENT 1 MINVALUE 1;

-- CREANDO TABLA PARA TIPOS DE DOCUMENTOS
CREATE TABLE electronicdocument.EDTDOCUMENTKIND
(
  ID NUMERIC(10) PRIMARY KEY DEFAULT nextval('electronicdocument.EDSDOCUMENTKIND'),
  CODE VARCHAR(2) UNIQUE NOT NULL ,
  DESCRIPTION VARCHAR(100) NOT NULL UNIQUE,
  DETAILS VARCHAR(250) NOT NULL,
  STATUS_ID NUMERIC(10),
  STATUS_CODE VARCHAR(5),
  CONSTRAINT FK_DOCUMENTKIND_STATUS FOREIGN KEY(STATUS_ID) REFERENCES electronicdocument.EDTSTATUS(ID) ON DELETE NO ACTION ON UPDATE CASCADE,
  CONSTRAINT FK_DOCUMENTKIND_STATUSCODE FOREIGN KEY(STATUS_CODE) REFERENCES electronicdocument.EDTSTATUS(CODE) ON DELETE NO ACTION ON UPDATE CASCADE
);


-- DATOS INICIALES PARA  TIPOS DE DOCUMENTOS
INSERT INTO electronicdocument.EDTDOCUMENTKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES ('01','FACTURA','FACTURA DE VENTA',1,'ACT');
INSERT INTO electronicdocument.EDTDOCUMENTKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES ('03','LIQUIDACIÓN DE COMPRA DE BIENES Y PRESTACIÓN DE SERVICIOS','DOCUMENTO PARA LIQUIDAR COMPRAS LOCALES O SERVICIOS PROFESIONALES',1,'ACT');
INSERT INTO electronicdocument.EDTDOCUMENTKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES ('04','NOTA DE CRÉDITO','DEVOLUCION TOTAL A PARCIAL DE UNA FACTURA, SALDO A FAVOR O DEVULUCION AL RECEPTOR DEL DOCUMENTO',1,'ACT');
INSERT INTO electronicdocument.EDTDOCUMENTKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES ('05','NOTA DE DÉBITO','COMPROMISO DE PAGO, SALDO A FAVOR DEL EMISOR DEL DOCUMENTO',1,'ACT');
INSERT INTO electronicdocument.EDTDOCUMENTKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES ('06','GUÍA DE REMISIÓN','MOVIMIENTO DE UNA MERCADERIA FISICA DE UNA UBICACION A OTRA',1,'ACT');
INSERT INTO electronicdocument.EDTDOCUMENTKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES ('07','COMPROBANTE DE RETENCIÓN','PORCENTAJE QUE SE QUEADA CON EL EMISOR DEL DOCUMENTO, DEPENDIENDO DE LA TRANSACION',1,'ACT');


-- CREANDO SECUENCIA PARA TIPO DE EMISION
CREATE SEQUENCE IF NOT EXISTS electronicdocument.EDSEMISSIONKIND START 1 INCREMENT 1 MINVALUE 1;

CREATE TABLE electronicdocument.EDTEMISSIONKIND
(
    ID NUMERIC(10) PRIMARY KEY DEFAULT nextval('electronicdocument.EDSEMISSIONKIND'),
    CODE VARCHAR(2) UNIQUE NOT NULL ,
    DESCRIPTION VARCHAR(100) NOT NULL UNIQUE,
    DETAILS VARCHAR(250) NOT NULL,
    STATUS_ID NUMERIC(10),
    STATUS_CODE VARCHAR(5),
    CONSTRAINT FK_EMISSIONKIND_STATUS FOREIGN KEY(STATUS_ID) REFERENCES electronicdocument.EDTSTATUS(ID) ON DELETE NO ACTION ON UPDATE CASCADE,
    CONSTRAINT FK_EMISSIONKIND_STATUSCODE FOREIGN KEY(STATUS_CODE) REFERENCES electronicdocument.EDTSTATUS(CODE) ON DELETE NO ACTION ON UPDATE CASCADE
);

-- INITIAL DATA FOR EMISION KIND
INSERT INTO electronicdocument.EDTEMISSIONKIND(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES('1','EMISIÓN NORMAL','EMISIÓN QUE SE HIZO SIN INCONVENIENTES',1,'ACT');


-- SECUENCIA QUE MANEJA LOS TIPOS DE IDENTIFICACION
CREATE SEQUENCE IF NOT EXISTS electronicdocument.EDSKINDID START 1 INCREMENT 1 MINVALUE 1;

CREATE TABLE IF NOT EXISTS electronicdocument.EDTKINDID
(
    ID NUMERIC(10) PRIMARY KEY DEFAULT NEXTVAL('electronicdocument.EDSKINDID'),
    CODE VARCHAR(2) UNIQUE,
    DESCRIPTION VARCHAR(100),
    DETAILS VARCHAR(250),
    STATUS_ID NUMERIC(10),
    STATUS_CODE VARCHAR(5),
    CONSTRAINT FK_KINDID_STATUS FOREIGN KEY(STATUS_ID) REFERENCES electronicdocument.EDTSTATUS(ID) ON DELETE NO ACTION ON UPDATE CASCADE,
    CONSTRAINT FK_KINDID_STATUSCODE FOREIGN KEY(STATUS_CODE) REFERENCES electronicdocument.EDTSTATUS(CODE) ON DELETE NO ACTION ON UPDATE CASCADE
);

INSERT INTO electronicdocument.EDTKINDID(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES('04','RUC','REGISTRO UNICO DE CONTRIBUYENTE 13 DIGITOS',1,'ACT');
INSERT INTO electronicdocument.EDTKINDID(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES('05','CEDULA','CEDULA DE IDENTIDAD PERSONA NATURAL 10 DIGITOS',1,'ACT');
INSERT INTO electronicdocument.EDTKINDID(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES('06','PASAPORTE','PASAPORTE SEGUN PAIS DE ORIGEN',1,'ACT');
INSERT INTO electronicdocument.EDTKINDID(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES('07','VENTA A CONSUMIDOR FINAL','VENTA A CONSUMIDOR FINAL: SE CONSIGNARÁ 13 DÍGITOS DE NUEVE EN LA IDENTIFICACIÓN DEL CLIENTE 9999999999999',1,'ACT');
INSERT INTO electronicdocument.EDTKINDID(CODE, DESCRIPTION, DETAILS, STATUS_ID, STATUS_CODE) VALUES('08','IDENTIFICACION DELEXTERIOR','IDENTIFICACIÓN DEL EXTERIOR: CORRESPONDERÁ AL NÚMERO DE IDENTIFICACIÓN OTORGADO POR LA ADMINISTRACIÓN TRIBUTARIA
(AT) DEL PAÍS QUE ES RESIDENTE FISCAL',1,'ACT');

-- SECUENCIA PARA LOS CLIENTES (RECEPTORES DE LAS FACTURAS)
CREATE SEQUENCE IF NOT EXISTS electronicdocument.EDSINVOICERECEIVER START 1 INCREMENT 1 MINVALUE 1;

CREATE TABLE IF NOT EXISTS electronicdocument.EDTINVOICERECEIVER
(
    ID NUMERIC(10) PRIMARY KEY  DEFAULT nextval('electronicdocument.EDSINVOICERECEIVER')
);